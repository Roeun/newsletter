<?php// si chiama Lista e non List perché list è riservato alla funzione list().class Lista {    static $db; # database PDO instance    static function create($name='') {    $q = "INSERT INTO lists (name, created_at) VALUES (?,?)";    $sql_data = array(      $name,      date("Y-m-d H:i:s"), // 2001-03-10 17:16:18 (the MySQL DATETIME format)    );    $s = self::$db->prepare($q);    return $s->execute($sql_data);  }    static function read($id) {    if ($id > 0) {      $q = "SELECT * FROM lists WHERE id=?";      $s = self::$db->prepare($q);      if ( $s->execute(array($id)) ) {        return $s->fetchObject();      }    }    return false;  }    static function update($id, $name='') {    if ($id > 0) {      $q = "UPDATE `lists` SET `name`=?, `updated_at`=? WHERE `id`=?";         $sql_data = array(        $name,        date("Y-m-d H:i:s"), // 2001-03-10 17:16:18 (the MySQL DATETIME format)        $id      );      $s = self::$db->prepare($q);      return $s->execute($sql_data);    }    return false;  }    static function delete($id) {    if ($id > 0) {        $q = "UPDATE lists SET is_deleted=1 WHERE id=?";      $s = self::$db->prepare($q);      return $s->execute(array($id));    }    return false;  }    static function all() {    $q = "SELECT * FROM lists WHERE is_deleted <= 0";    $s = self::$db->prepare($q);    if ($s->execute()) {      return $s->fetchAll(PDO::FETCH_OBJ);    }    return false;  }  static function all_with_users_count() {    $q = "SELECT l.*, COUNT(u.id) users_count FROM lists l     JOIN users u ON l.id = u.list_id    WHERE l.is_deleted <= 0    GROUP BY l.id    ORDER BY l.id";    $s = self::$db->prepare($q);    if ($s->execute()) {      return $s->fetchAll(PDO::FETCH_OBJ);    }    return false;  }    static function getSelectById($id) {    if ($id > 0) {      $q = "SELECT * FROM lists";    }  }    /* Returns an array without duplicates.  * @param $list a list of email addresses.  */  public static function remove_duplicates_from($list, $separator="\n") {    $array_with_dupes = explode($separator, $list);    $array_sanitized = array_unique($array_with_dupes);    return $array_sanitized;    /*    $input_rows = count($duplicated_array);    $output_rows = count($sanitized_array);    $dupes = $input_rows - $output_rows;    echo "Operazione conclusa con successo!<br>";    echo "Email iniziali: $input_rows<br>";    echo "Email finali: $output_rows<br>";    echo "Duplicati rimossi: $dupes<br>";    */  }}/***** INITIALIZATION *****/Lista::$db = $db;